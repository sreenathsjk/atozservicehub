<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Community Posts — AtoZ Service Hub</title>
<meta name="theme-color" content="#060c1a">
<style>
:root{
  --bg:#060c1a;--bg2:#0c1428;--bg3:#111e38;--card:#131d35;--card2:#1a2645;
  --gold:#f5a623;--gold2:#ffc94a;--teal:#00d4aa;--red:#ff6b6b;--blue:#60a5fa;--green:#4ade80;
  --text:#eef2ff;--muted:#7a8ab0;--dim:#3a4a6a;
  --border:rgba(255,255,255,0.07);--borda:rgba(245,166,35,0.35);
  --glow:rgba(245,166,35,0.09);
  --shadow:0 4px 24px rgba(0,0,0,0.5);
  --shadowl:0 16px 56px rgba(0,0,0,0.7);
  --r:12px;--r2:8px;--navh:60px;
  --font:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
  --serif:Georgia,"Times New Roman",serif;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;-webkit-font-smoothing:antialiased}
a{text-decoration:none;color:inherit}ul{list-style:none}button{font-family:var(--font);cursor:pointer}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--gold);border-radius:2px}

/* NAV */
nav{position:sticky;top:0;z-index:999;height:var(--navh);background:var(--bg);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 clamp(1rem,4vw,2rem);gap:1rem;box-shadow:0 2px 20px rgba(0,0,0,0.5)}
.logo{display:flex;align-items:center;font-family:var(--serif);font-size:1.3rem;font-weight:700;white-space:nowrap}
.la{color:var(--gold)}.lz{color:var(--teal)}.lr{color:var(--text)}
.nl{display:flex;gap:0;margin-left:auto;align-items:center}
.nl a{color:var(--muted);font-size:.83rem;font-weight:500;padding:.42rem .82rem;border-radius:6px;transition:color .15s,background .15s;white-space:nowrap;display:block}
.nl a:hover{color:var(--text);background:rgba(255,255,255,0.05)}
.nl a.on{color:var(--gold);background:var(--glow)}
.nl .nb{margin-left:.5rem;background:var(--gold);color:#000!important;font-weight:700!important;padding:.42rem 1.1rem!important;border-radius:6px!important}
.nt{display:none;background:none;border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:1.1rem;padding:.36rem .62rem;margin-left:auto;line-height:1;transition:border-color .2s}
.nt:hover{border-color:var(--gold);color:var(--gold)}

/* PAGE HEADER */
.ph{background:var(--bg2);border-bottom:1px solid var(--border);padding:clamp(2.5rem,7vw,4rem) clamp(1rem,5vw,2rem) clamp(2rem,5vw,3rem);text-align:center;position:relative;overflow:hidden}
.ph::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 70% 90% at 50% -20%,rgba(245,166,35,.09) 0%,transparent 65%);pointer-events:none}
.ph-i{position:relative;z-index:1}
.stag{display:inline-block;font-size:.68rem;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--teal);padding:.26rem .7rem;background:rgba(0,212,170,.07);border:1px solid rgba(0,212,170,.15);border-radius:4px;margin-bottom:.7rem}
.ph h1{font-family:var(--serif);font-size:clamp(1.75rem,5vw,2.9rem);font-weight:700;letter-spacing:-.4px;margin:.65rem 0 .5rem}
.ph p{color:var(--muted);font-size:.97rem}

/* LAYOUT */
.wrap{max-width:1100px;margin:0 auto;padding:2rem clamp(1rem,5vw,2rem)}
.two-col{display:grid;grid-template-columns:1fr 340px;gap:2rem;align-items:start}

/* SUBMIT CARD */
.submit-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1.75rem;margin-bottom:2rem}
.submit-card h2{font-family:var(--serif);font-size:1.3rem;font-weight:700;margin-bottom:1.25rem;display:flex;align-items:center;gap:.6rem}
.submit-card h2 .icon{width:36px;height:36px;background:var(--glow);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.1rem}

/* FORM */
.fgrp{margin-bottom:1rem}
.fgrp label{display:block;font-size:.78rem;font-weight:600;margin-bottom:.4rem;color:var(--muted);letter-spacing:.02em}
.fgrp input,.fgrp textarea,.fgrp select{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r2);padding:.72rem .95rem;font-family:var(--font);font-size:.9rem;color:var(--text);outline:none;transition:border-color .2s,box-shadow .2s}
.fgrp input:focus,.fgrp textarea:focus,.fgrp select:focus{border-color:var(--gold);box-shadow:0 0 0 3px rgba(245,166,35,.08)}
.fgrp input::placeholder,.fgrp textarea::placeholder{color:var(--dim)}
.fgrp textarea{min-height:100px;resize:vertical}
.fgrp select option{background:var(--bg3);color:var(--text)}
.frow{display:grid;grid-template-columns:1fr 1fr;gap:1rem}

/* BTN */
.btn{display:inline-flex;align-items:center;gap:.45rem;padding:.75rem 1.6rem;border-radius:var(--r2);font-family:var(--font);font-weight:600;font-size:.91rem;border:none;cursor:pointer;transition:all .2s;text-decoration:none}
.bp{background:var(--gold);color:#0a0a0a;box-shadow:0 4px 20px rgba(245,166,35,.3)}
.bp:hover{background:var(--gold2);transform:translateY(-2px)}
.bp:disabled{opacity:.5;cursor:not-allowed;transform:none}
.bg{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.12)}
.bg:hover{border-color:var(--borda);color:var(--gold)}
.bt{background:rgba(0,212,170,.1);color:var(--teal);border:1px solid rgba(0,212,170,.25)}
.bt:hover{background:rgba(0,212,170,.18)}
.br{background:rgba(255,107,107,.1);color:var(--red);border:1px solid rgba(255,107,107,.25)}
.br:hover{background:rgba(255,107,107,.18)}
.bgg{background:rgba(74,222,128,.1);color:var(--green);border:1px solid rgba(74,222,128,.25)}
.bgg:hover{background:rgba(74,222,128,.18)}
.btn-sm{padding:.42rem .9rem;font-size:.8rem}
.btn-block{width:100%;justify-content:center}

/* FILTER TABS */
.ftabs{display:flex;flex-wrap:wrap;gap:.45rem;margin-bottom:1.75rem;align-items:center}
.flbl{font-size:.73rem;color:var(--dim);font-weight:600;margin-right:.25rem}
.ftab{padding:.4rem .88rem;border-radius:6px;border:1px solid var(--border);background:var(--card);color:var(--muted);font-family:var(--font);font-size:.8rem;font-weight:500;transition:all .17s;white-space:nowrap}
.ftab.on{background:rgba(245,166,35,.09);border-color:var(--gold);color:var(--gold)}
.ftab:hover:not(.on){border-color:rgba(255,255,255,.13);color:var(--text)}

/* POST CARD */
.posts-feed{display:flex;flex-direction:column;gap:1.1rem}
.post{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1.35rem;transition:border-color .2s}
.post:hover{border-color:rgba(245,166,35,.15)}
.post-top{display:flex;align-items:flex-start;justify-content:space-between;gap:.75rem;margin-bottom:.9rem}
.post-cat{display:inline-flex;align-items:center;gap:.35rem;font-size:.68rem;font-weight:700;letter-spacing:.8px;text-transform:uppercase;padding:.22rem .65rem;border-radius:4px}
.cat-jobs{color:var(--gold);background:rgba(245,166,35,.09);border:1px solid rgba(245,166,35,.18)}
.cat-schemes{color:var(--teal);background:rgba(0,212,170,.07);border:1px solid rgba(0,212,170,.18)}
.cat-courses{color:var(--blue);background:rgba(96,165,250,.07);border:1px solid rgba(96,165,250,.18)}
.cat-services{color:#c084fc;background:rgba(192,132,252,.07);border:1px solid rgba(192,132,252,.18)}
.cat-updates{color:var(--red);background:rgba(255,107,107,.07);border:1px solid rgba(255,107,107,.18)}
.cat-other{color:var(--muted);background:rgba(122,138,176,.07);border:1px solid rgba(122,138,176,.18)}
.post-meta-top{display:flex;align-items:center;gap:.75rem;font-size:.73rem;color:var(--dim)}
.post-avatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--teal));display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;color:#000;flex-shrink:0}
.post h3{font-size:1rem;font-weight:650;margin-bottom:.5rem;line-height:1.4}
.post-body{font-size:.875rem;color:var(--muted);line-height:1.65;margin-bottom:.9rem}
.post-link{font-size:.8rem;color:var(--gold);display:inline-flex;align-items:center;gap:.3rem;margin-bottom:.9rem}
.post-link:hover{text-decoration:underline}
.post-footer{display:flex;align-items:center;justify-content:space-between;gap:.75rem;flex-wrap:wrap;padding-top:.75rem;border-top:1px solid var(--border)}
.post-date{font-size:.72rem;color:var(--dim)}
.post-actions{display:flex;gap:.5rem}
.like-btn{background:none;border:none;color:var(--muted);font-size:.8rem;cursor:pointer;display:flex;align-items:center;gap:.3rem;padding:.3rem .6rem;border-radius:6px;transition:all .2s}
.like-btn:hover,.like-btn.liked{color:var(--red);background:rgba(255,107,107,.08)}

/* ADMIN BADGE */
.admin-badge{display:inline-flex;align-items:center;gap:.3rem;font-size:.65rem;font-weight:700;letter-spacing:.5px;text-transform:uppercase;color:#fbbf24;background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.2);padding:.15rem .5rem;border-radius:4px}

/* PENDING BANNER */
.pending-banner{background:rgba(245,166,35,.05);border:1px solid rgba(245,166,35,.15);border-radius:var(--r);padding:1rem 1.25rem;margin-bottom:2rem;display:flex;align-items:center;gap:.75rem;font-size:.875rem;color:var(--gold)}

/* SIDEBAR */
.sidebar{display:flex;flex-direction:column;gap:1.25rem}
.side-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:1.35rem}
.side-card h3{font-size:.85rem;font-weight:700;margin-bottom:1rem;color:var(--text);display:flex;align-items:center;gap:.5rem}
.side-stat{display:flex;align-items:center;justify-content:space-between;padding:.55rem 0;border-bottom:1px solid var(--border);font-size:.83rem}
.side-stat:last-child{border-bottom:none}
.side-stat-val{font-weight:700;color:var(--gold)}
.guidelines li{font-size:.8rem;color:var(--muted);padding:.35rem 0;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;gap:.5rem}
.guidelines li:last-child{border-bottom:none}
.guidelines li::before{content:'✓';color:var(--teal);font-size:.75rem;margin-top:.1rem;flex-shrink:0}

/* TOAST */
.toast{position:fixed;bottom:2rem;right:2rem;z-index:9999;background:var(--card);border:1px solid var(--border);border-radius:var(--r2);padding:1rem 1.35rem;box-shadow:var(--shadowl);font-size:.875rem;max-width:320px;transform:translateY(100px);opacity:0;transition:all .3s;display:flex;align-items:center;gap:.65rem}
.toast.show{transform:translateY(0);opacity:1}
.toast.success{border-color:rgba(74,222,128,.3);background:rgba(10,15,30,.98)}
.toast.error{border-color:rgba(255,107,107,.3)}

/* MODAL */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:10000;align-items:center;justify-content:center;padding:1rem}
.modal-overlay.open{display:flex}
.modal{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);width:100%;max-width:480px;max-height:90vh;overflow-y:auto;animation:slideUp .25s ease}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.modal-head{padding:1.35rem 1.5rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal-head h3{font-family:var(--serif);font-size:1.2rem;font-weight:700}
.modal-close{background:none;border:none;color:var(--muted);font-size:1.3rem;cursor:pointer;padding:.2rem .4rem;border-radius:4px;transition:color .2s}
.modal-close:hover{color:var(--text)}
.modal-body{padding:1.5rem}
.char-count{font-size:.72rem;color:var(--dim);text-align:right;margin-top:.25rem}

/* EMPTY STATE */
.empty{text-align:center;padding:3rem 1rem}
.empty-icon{font-size:3rem;margin-bottom:1rem;opacity:.4}
.empty h3{font-size:1.1rem;font-weight:600;margin-bottom:.5rem;color:var(--muted)}
.empty p{font-size:.875rem;color:var(--dim)}

/* FOOTER */
footer{background:var(--bg2);border-top:1px solid var(--border);padding:clamp(2.75rem,6vw,4rem) clamp(1rem,5vw,2rem) 0;margin-top:4.5rem}
.fin{max-width:1200px;margin:0 auto}
.fgrd{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:2.5rem;margin-bottom:2.5rem}
.fb p{font-size:.85rem;color:var(--muted);line-height:1.68;margin-top:.9rem;max-width:240px}
.fcol h4{font-size:.7rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);margin-bottom:1rem}
.fcol li{margin-bottom:.48rem}
.fcol li a{color:var(--muted);font-size:.85rem;transition:color .18s}
.fcol li a:hover{color:var(--gold)}
.fbot{border-top:1px solid var(--border);padding:1.35rem 0 1.75rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.7rem;font-size:.76rem;color:var(--dim)}

/* RESPONSIVE */
@media(max-width:900px){.two-col{grid-template-columns:1fr}}
@media(max-width:768px){
  nav{position:relative}
  .nl{display:none;flex-direction:column;position:absolute;top:var(--navh);left:0;right:0;background:var(--bg);padding:.75rem 1.25rem 1.25rem;border-bottom:2px solid var(--border);gap:.1rem;z-index:998}
  .nl.open{display:flex}.nl a{padding:.62rem .85rem;font-size:.93rem}.nl .nb{margin-left:0;margin-top:.45rem}
  .nt{display:flex;align-items:center;justify-content:center}
  .fgrd{grid-template-columns:1fr 1fr}
}
@media(max-width:480px){.frow{grid-template-columns:1fr}.fgrd{grid-template-columns:1fr}}
</style>
</head>
<body>

<nav>
  <a href="index.html" class="logo"><span class="la">A</span><span class="lr">to</span><span class="lz">Z</span>&nbsp;<span class="lr">Service Hub</span></a>
  <button class="nt" aria-expanded="false" onclick="toggleNav()">&#9776;</button>
  <ul class="nl" id="navlinks">
    <li><a href="index.html">Home</a></li>
    <li><a href="latest-jobs.html">Latest Jobs</a></li>
    <li><a href="govt-schemes.html">Govt Schemes</a></li>
    <li><a href="free-courses.html">Free Courses</a></li>
    <li><a href="daily-updates.html">Daily Updates</a></li>
    <li><a href="service-providers.html">Services</a></li>
    <li><a href="community.html" class="on">Community</a></li>
    <li><a href="contact.html" class="nb">Contact Us</a></li>
  </ul>
</nav>

<div class="ph">
  <div class="ph-i">
    <div class="stag">Community</div>
    <h1>&#128101; Community Posts</h1>
    <p>Share jobs, schemes, services and opportunities — reviewed and approved by admins before going live.</p>
  </div>
</div>

<div class="wrap">
  <div class="two-col">
    <!-- MAIN FEED -->
    <div>
      <!-- Submit Form -->
      <div class="submit-card">
        <h2><span class="icon">&#9998;</span> Share Something Useful</h2>
        <div class="frow" style="margin-bottom:1rem">
          <div class="fgrp" style="margin-bottom:0">
            <label>Your Name</label>
            <input type="text" id="inp-name" placeholder="Your name or alias" maxlength="50">
          </div>
          <div class="fgrp" style="margin-bottom:0">
            <label>Category</label>
            <select id="inp-cat">
              <option value="">Select category...</option>
              <option value="jobs">&#128188; Latest Jobs</option>
              <option value="schemes">&#127963;&#65039; Govt Schemes</option>
              <option value="courses">&#127891; Free Courses</option>
              <option value="services">&#128295; Service Providers</option>
              <option value="updates">&#128240; Daily Updates</option>
              <option value="other">&#128161; Other</option>
            </select>
          </div>
        </div>
        <div class="fgrp">
          <label>Title <span style="color:var(--dim)">(make it clear and specific)</span></label>
          <input type="text" id="inp-title" placeholder="e.g. RRB NTPC 2026 — 7000 Vacancies Open, Apply by Mar 31" maxlength="120">
          <div class="char-count"><span id="title-count">0</span>/120</div>
        </div>
        <div class="fgrp">
          <label>Details</label>
          <textarea id="inp-body" placeholder="Share all important details — eligibility, deadline, how to apply, salary, etc." maxlength="800"></textarea>
          <div class="char-count"><span id="body-count">0</span>/800</div>
        </div>
        <div class="fgrp">
          <label>Source / Link <span style="color:var(--dim)">(optional)</span></label>
          <input type="url" id="inp-link" placeholder="https://official-source.gov.in">
        </div>
        <div style="display:flex;gap:.75rem;flex-wrap:wrap">
          <button class="btn bp" onclick="submitPost()">&#128640; Submit for Review</button>
          <span style="font-size:.78rem;color:var(--dim);align-self:center">Admin will review before publishing</span>
        </div>
      </div>

      <!-- Filter Tabs -->
      <div class="ftabs">
        <span class="flbl">Filter:</span>
        <button class="ftab on" data-filter="all" onclick="filterPosts('all',this)">All Posts</button>
        <button class="ftab" data-filter="jobs" onclick="filterPosts('jobs',this)">Jobs</button>
        <button class="ftab" data-filter="schemes" onclick="filterPosts('schemes',this)">Schemes</button>
        <button class="ftab" data-filter="courses" onclick="filterPosts('courses',this)">Courses</button>
        <button class="ftab" data-filter="services" onclick="filterPosts('services',this)">Services</button>
        <button class="ftab" data-filter="updates" onclick="filterPosts('updates',this)">Updates</button>
      </div>

      <!-- Posts Feed -->
      <div id="posts-feed" class="posts-feed">
        <div class="empty" id="empty-state">
          <div class="empty-icon">&#128101;</div>
          <h3>Loading posts...</h3>
          <p>Community posts will appear here</p>
        </div>
      </div>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar">
      <div class="side-card">
        <h3>&#128202; Community Stats</h3>
        <div id="stats-container">
          <div class="side-stat"><span>Total Posts</span><span class="side-stat-val" id="stat-total">0</span></div>
          <div class="side-stat"><span>Jobs Shared</span><span class="side-stat-val" id="stat-jobs">0</span></div>
          <div class="side-stat"><span>Schemes</span><span class="side-stat-val" id="stat-schemes">0</span></div>
          <div class="side-stat"><span>Courses</span><span class="side-stat-val" id="stat-courses">0</span></div>
          <div class="side-stat"><span>Services</span><span class="side-stat-val" id="stat-services">0</span></div>
          <div class="side-stat"><span>Other</span><span class="side-stat-val" id="stat-other">0</span></div>
        </div>
      </div>

      <div class="side-card">
        <h3>&#128196; Posting Guidelines</h3>
        <ul class="guidelines">
          <li>Only share genuine, useful information</li>
          <li>Verify facts before posting — include official links</li>
          <li>No spam, duplicate posts, or advertisements</li>
          <li>No vulgar, offensive or misleading content</li>
          <li>Posts reviewed by admin before going live</li>
          <li>Approved posts stay permanently on the site</li>
        </ul>
      </div>

      <div class="side-card">
        <h3>&#128274; Admin Panel</h3>
        <p style="font-size:.83rem;color:var(--muted);margin-bottom:1rem">Site administrators can review and manage all submitted posts.</p>
        <button class="btn bg btn-block btn-sm" onclick="openAdminLogin()">Admin Login</button>
      </div>

      <div class="side-card">
        <h3>&#128161; Check Your Submission</h3>
        <p style="font-size:.83rem;color:var(--muted);margin-bottom:1rem">Submitted a post? Check its status here.</p>
        <input type="text" id="track-input" placeholder="Enter your post title..." style="width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:var(--r2);padding:.65rem .9rem;font-family:var(--font);font-size:.85rem;color:var(--text);outline:none;margin-bottom:.75rem" onfocus="this.style.borderColor='var(--gold)'" onblur="this.style.borderColor='var(--border)'">
        <button class="btn bt btn-block btn-sm" onclick="trackPost()">Track Status</button>
        <div id="track-result" style="margin-top:.75rem;font-size:.82rem"></div>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN MODAL -->
<div class="modal-overlay" id="admin-modal">
  <div class="modal">
    <div class="modal-head">
      <h3>&#128274; Admin Panel</h3>
      <button class="modal-close" onclick="closeModal('admin-modal')">&#10005;</button>
    </div>
    <div class="modal-body">
      <div id="admin-login-view">
        <div class="fgrp">
          <label>Admin Password</label>
          <input type="password" id="admin-pass" placeholder="Enter admin password..." onkeydown="if(event.key==='Enter')adminLogin()">
        </div>
        <button class="btn bp btn-block" onclick="adminLogin()">Login to Admin Panel</button>
        <p style="font-size:.75rem;color:var(--dim);text-align:center;margin-top:.75rem">Contact site admin for password</p>
      </div>
      <div id="admin-panel-view" style="display:none">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem">
          <span style="font-size:.83rem;color:var(--teal)">&#9679; Logged in as Admin</span>
          <button class="btn br btn-sm" onclick="adminLogout()">Logout</button>
        </div>

        <div style="background:rgba(245,166,35,.05);border:1px solid rgba(245,166,35,.15);border-radius:var(--r2);padding:.85rem 1rem;margin-bottom:1.25rem;font-size:.83rem">
          <strong style="color:var(--gold)">&#128202; Dashboard:</strong>
          <span style="color:var(--muted);margin-left:.5rem">
            <span id="adm-pending-count">0</span> pending &nbsp;|&nbsp;
            <span id="adm-approved-count">0</span> approved &nbsp;|&nbsp;
            <span id="adm-total-count">0</span> total
          </span>
        </div>

        <!-- Pending Posts -->
        <div id="adm-pending-section">
          <h4 style="font-size:.85rem;font-weight:700;color:var(--gold);margin-bottom:.9rem;display:flex;align-items:center;gap:.4rem">&#9203; Pending Review <span id="adm-pending-badge" style="background:rgba(245,166,35,.15);color:var(--gold);font-size:.7rem;padding:.1rem .45rem;border-radius:10px">0</span></h4>
          <div id="adm-pending-list" style="display:flex;flex-direction:column;gap:.75rem;max-height:380px;overflow-y:auto;padding-right:.25rem"></div>
        </div>

        <div style="border-top:1px solid var(--border);margin:1.25rem 0"></div>

        <!-- Approved Posts -->
        <div id="adm-approved-section">
          <h4 style="font-size:.85rem;font-weight:700;color:var(--teal);margin-bottom:.9rem">&#10003; Approved Posts</h4>
          <div id="adm-approved-list" style="display:flex;flex-direction:column;gap:.75rem;max-height:320px;overflow-y:auto;padding-right:.25rem"></div>
        </div>

        <div style="border-top:1px solid var(--border);margin:1.25rem 0"></div>
        <div style="display:flex;justify-content:center">
          <button class="btn br btn-sm" onclick="if(confirm('Delete ALL posts? This cannot be undone.'))adminClearAll()">&#128465; Clear All Data</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- FOOTER -->
<footer><div class="fin">
  <div class="fgrd">
    <div class="fb">
      <a href="index.html" class="logo"><span class="la">A</span><span class="lr">to</span><span class="lz">Z</span>&nbsp;<span class="lr">Service Hub</span></a>
      <p>Your one-stop platform for jobs, schemes, free courses, daily updates and trusted service providers.</p>
    </div>
    <div class="fcol"><h4>Features</h4><ul>
      <li><a href="latest-jobs.html">Latest Jobs</a></li>
      <li><a href="govt-schemes.html">Govt Schemes</a></li>
      <li><a href="free-courses.html">Free Courses</a></li>
      <li><a href="daily-updates.html">Daily Updates</a></li>
    </ul></div>
    <div class="fcol"><h4>Community</h4><ul>
      <li><a href="community.html">Community Posts</a></li>
      <li><a href="contact.html">Contact Us</a></li>
      <li><a href="about.html">About Us</a></li>
    </ul></div>
    <div class="fcol"><h4>Company</h4><ul>
      <li><a href="privacy.html">Privacy Policy</a></li>
      <li><a href="terms.html">Terms of Service</a></li>
    </ul></div>
  </div>
  <div class="fbot">
    <span>&#169; 2026 AtoZ Service Hub. All rights reserved.</span>
    <span>Made with &#10084;&#65039; for every Indian</span>
  </div>
</div></footer>

<script>
// ═══════════════════════════════════════════════════════
//  STORAGE ENGINE — uses window.storage (persistent API)
//  with localStorage fallback for local testing
// ═══════════════════════════════════════════════════════
const STORAGE_KEY = 'atozhub:community:posts';
const ADMIN_KEY   = 'atozhub:community:admin-session';
const ADMIN_PASS  = 'Krishika@24Achyut@04';

let allPosts = [];
let currentFilter = 'all';
let isAdmin = false;

// Storage helpers
async function storageSave(posts) {
  const data = JSON.stringify(posts);
  // Try persistent storage API first
  if (window.storage) {
    try { await window.storage.set(STORAGE_KEY, data, true); } catch(e) {}
  }
  // Always mirror to localStorage for instant reads
  try { localStorage.setItem(STORAGE_KEY, data); } catch(e) {}
}

async function storageLoad() {
  // Try persistent storage API first
  if (window.storage) {
    try {
      const res = await window.storage.get(STORAGE_KEY, true);
      if (res && res.value) {
        return JSON.parse(res.value);
      }
    } catch(e) {}
  }
  // Fallback to localStorage
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) return JSON.parse(raw);
  } catch(e) {}
  return null;
}

// ═══════════════════════════════════════════════════════
//  INIT
// ═══════════════════════════════════════════════════════
document.addEventListener('DOMContentLoaded', async () => {
  // Load posts
  const saved = await storageLoad();
  if (saved && Array.isArray(saved)) {
    allPosts = saved;
  } else {
    // Seed with sample approved posts so site isn't empty
    allPosts = getSeedPosts();
    await storageSave(allPosts);
  }

  renderFeed();
  updateStats();
  setupCharCounters();

  // Check admin session
  isAdmin = sessionStorage.getItem(ADMIN_KEY) === 'true';
});

// ═══════════════════════════════════════════════════════
//  SEED DATA (shows on first visit)
// ═══════════════════════════════════════════════════════
function getSeedPosts() {
  return [
    {
      id: genId(), name: 'Anita Sharma', cat: 'jobs',
      title: 'RRB NTPC 2026 — 7,000 Graduate Level Posts Open Nationwide',
      body: 'Railway Recruitment Board has released notification for 7000 Graduate Level posts. Eligibility: Any degree graduate. Age: 18-33 years. Pay Scale: ₹35,400-₹1,12,400. Online application opens March 1, 2026. Exam will be Computer Based Test in two stages.',
      link: 'https://indianrailways.gov.in', status: 'approved',
      date: new Date('2026-02-27').toISOString(), likes: 24, likedBy: []
    },
    {
      id: genId(), name: 'Suresh Reddy', cat: 'schemes',
      title: 'PM Vishwakarma Yojana — ₹3 Lakh Collateral-Free Loan for Artisans',
      body: 'Traditional craftsmen and artisans can now avail interest-free loans up to ₹3 lakh under PM Vishwakarma Yojana. Eligible trades include carpenter, blacksmith, potter, goldsmith, tailor and 14 other artisan trades. Free skill training also provided. Apply at nearest Common Service Centre.',
      link: '', status: 'approved',
      date: new Date('2026-02-26').toISOString(), likes: 18, likedBy: []
    },
    {
      id: genId(), name: 'Priya Menon', cat: 'courses',
      title: 'NPTEL Free Courses with Certificate — Jan-Apr 2026 Semester Open',
      body: 'IIT and IISc professors are offering 500+ free online courses this semester on NPTEL platform. Courses in Engineering, Science, Management, Humanities. Certificate on paying ₹1000 exam fee. Some courses now offer free certificates too. Register at nptel.ac.in before March 31.',
      link: 'https://nptel.ac.in', status: 'approved',
      date: new Date('2026-02-25').toISOString(), likes: 31, likedBy: []
    },
    {
      id: genId(), name: 'Rajesh Kumar', cat: 'services',
      title: 'Free Legal Aid Available at District Courts — Know Your Rights',
      body: 'Did you know every Indian citizen is entitled to free legal aid if they cannot afford a lawyer? District Legal Services Authority (DLSA) provides free lawyers for SC/ST, women, children, disabled persons and those with income below ₹1 lakh/year. Visit your nearest District Court and ask for DLSA office.',
      link: '', status: 'approved',
      date: new Date('2026-02-24').toISOString(), likes: 42, likedBy: []
    },
    {
      id: genId(), name: 'Divya Nair', cat: 'updates',
      title: 'UPSC Prelims 2026 — Last Date to Apply is March 18, Check Eligibility',
      body: 'UPSC Civil Services (IAS/IPS) Preliminary Exam 2026 notification is out. Last date to apply online is March 18, 2026. Exam Date: June 14, 2026. Eligibility: Any degree holder, Age 21-32 (relaxation for reserved categories). Apply at upsconline.nic.in.',
      link: 'https://upsc.gov.in', status: 'approved',
      date: new Date('2026-02-23').toISOString(), likes: 67, likedBy: []
    }
  ];
}

function genId() {
  return Date.now().toString(36) + Math.random().toString(36).slice(2,7);
}

// ═══════════════════════════════════════════════════════
//  SUBMIT POST
// ═══════════════════════════════════════════════════════
async function submitPost() {
  const name  = document.getElementById('inp-name').value.trim();
  const cat   = document.getElementById('inp-cat').value;
  const title = document.getElementById('inp-title').value.trim();
  const body  = document.getElementById('inp-body').value.trim();
  const link  = document.getElementById('inp-link').value.trim();

  if (!name)  return showToast('Please enter your name.', 'error');
  if (!cat)   return showToast('Please select a category.', 'error');
  if (!title) return showToast('Please enter a title.', 'error');
  if (title.length < 10) return showToast('Title is too short. Be more descriptive.', 'error');
  if (!body)  return showToast('Please enter the post details.', 'error');
  if (body.length < 30) return showToast('Details are too short. Add more information.', 'error');

  // Check for duplicate title
  const dup = allPosts.find(p => p.title.toLowerCase() === title.toLowerCase());
  if (dup) return showToast('A post with this title already exists.', 'error');

  const post = {
    id: genId(), name, cat, title, body,
    link: link || '',
    status: 'pending',
    date: new Date().toISOString(),
    likes: 0, likedBy: []
  };

  allPosts.unshift(post);
  await storageSave(allPosts);
  renderFeed();
  updateStats();

  // Clear form
  ['inp-name','inp-cat','inp-title','inp-body','inp-link'].forEach(id => {
    const el = document.getElementById(id);
    el.value = '';
  });
  document.getElementById('title-count').textContent = '0';
  document.getElementById('body-count').textContent = '0';

  showToast('&#9989; Post submitted! Admin will review it shortly.', 'success');
}

// ═══════════════════════════════════════════════════════
//  RENDER FEED
// ═══════════════════════════════════════════════════════
function renderFeed() {
  const feed = document.getElementById('posts-feed');
  const approved = allPosts.filter(p => p.status === 'approved' && (currentFilter === 'all' || p.cat === currentFilter));

  if (approved.length === 0) {
    feed.innerHTML = `<div class="empty"><div class="empty-icon">&#128101;</div><h3>${currentFilter === 'all' ? 'No posts yet' : 'No posts in this category'}</h3><p>${currentFilter === 'all' ? 'Be the first to share something useful!' : 'Switch to another category or share something here.'}</p></div>`;
    return;
  }

  feed.innerHTML = approved.map(p => renderPost(p)).join('');
}

const CAT_LABELS = {jobs:'Latest Jobs', schemes:'Govt Schemes', courses:'Free Courses', services:'Service Providers', updates:'Daily Updates', other:'Other'};
const CAT_ICONS  = {jobs:'&#128188;', schemes:'&#127963;&#65039;', courses:'&#127891;', services:'&#128295;', updates:'&#128240;', other:'&#128161;'};

function renderPost(p) {
  const d = new Date(p.date);
  const dateStr = d.toLocaleDateString('en-IN', {day:'numeric',month:'short',year:'numeric'});
  const initials = (p.name || 'U').split(' ').map(w=>w[0]).join('').toUpperCase().slice(0,2);
  const liked = (p.likedBy || []).includes(getVisitorId());

  return `<div class="post" id="post-${p.id}" data-cat="${p.cat}">
    <div class="post-top">
      <span class="post-cat cat-${p.cat}">${CAT_ICONS[p.cat]||''} ${CAT_LABELS[p.cat]||p.cat}</span>
      <div class="post-meta-top">
        <div class="post-avatar">${initials}</div>
        <span>${escHtml(p.name)}</span>
      </div>
    </div>
    <h3>${escHtml(p.title)}</h3>
    <div class="post-body">${escHtml(p.body)}</div>
    ${p.link ? `<a href="${escHtml(p.link)}" target="_blank" rel="noopener" class="post-link">&#128279; View Official Source &#8599;</a>` : ''}
    <div class="post-footer">
      <span class="post-date">&#128197; ${dateStr}</span>
      <div class="post-actions">
        <button class="like-btn ${liked?'liked':''}" onclick="toggleLike('${p.id}')">
          ${liked ? '&#10084;&#65039;' : '&#129293;'} ${p.likes || 0} Helpful
        </button>
      </div>
    </div>
  </div>`;
}

// ═══════════════════════════════════════════════════════
//  LIKE
// ═══════════════════════════════════════════════════════
const getVisitorId = () => {
  let id = localStorage.getItem('atozhub:visitor-id');
  if (!id) { id = genId(); localStorage.setItem('atozhub:visitor-id', id); }
  return id;
};

async function toggleLike(id) {
  const post = allPosts.find(p => p.id === id);
  if (!post) return;
  const vid = getVisitorId();
  if (!post.likedBy) post.likedBy = [];
  const idx = post.likedBy.indexOf(vid);
  if (idx === -1) { post.likedBy.push(vid); post.likes = (post.likes||0) + 1; }
  else { post.likedBy.splice(idx,1); post.likes = Math.max(0,(post.likes||0)-1); }
  await storageSave(allPosts);
  renderFeed();
}

// ═══════════════════════════════════════════════════════
//  FILTER
// ═══════════════════════════════════════════════════════
function filterPosts(filter, btn) {
  currentFilter = filter;
  document.querySelectorAll('.ftab').forEach(t => t.classList.remove('on'));
  if (btn) btn.classList.add('on');
  renderFeed();
}

// ═══════════════════════════════════════════════════════
//  STATS
// ═══════════════════════════════════════════════════════
function updateStats() {
  const approved = allPosts.filter(p => p.status === 'approved');
  document.getElementById('stat-total').textContent   = approved.length;
  document.getElementById('stat-jobs').textContent    = approved.filter(p=>p.cat==='jobs').length;
  document.getElementById('stat-schemes').textContent = approved.filter(p=>p.cat==='schemes').length;
  document.getElementById('stat-courses').textContent = approved.filter(p=>p.cat==='courses').length;
  document.getElementById('stat-services').textContent= approved.filter(p=>p.cat==='services').length;
  document.getElementById('stat-other').textContent   = approved.filter(p=>p.cat==='updates'||p.cat==='other').length;
}

// ═══════════════════════════════════════════════════════
//  TRACK POST STATUS
// ═══════════════════════════════════════════════════════
function trackPost() {
  const q = document.getElementById('track-input').value.trim().toLowerCase();
  const res = document.getElementById('track-result');
  if (!q) { res.innerHTML = ''; return; }
  const post = allPosts.find(p => p.title.toLowerCase().includes(q));
  if (!post) {
    res.innerHTML = '<span style="color:var(--dim)">No post found matching that title.</span>';
  } else {
    const statusMap = {
      pending:  {color:'var(--gold)', icon:'&#9203;', label:'Pending Review'},
      approved: {color:'var(--teal)', icon:'&#9989;', label:'Approved & Live'},
      rejected: {color:'var(--red)',  icon:'&#10060;', label:'Rejected'}
    };
    const s = statusMap[post.status] || statusMap.pending;
    res.innerHTML = `<div style="padding:.7rem;background:var(--card);border-radius:var(--r2);border:1px solid var(--border)">
      <div style="font-size:.75rem;color:var(--dim);margin-bottom:.3rem">Post found:</div>
      <div style="font-size:.83rem;font-weight:600;margin-bottom:.4rem">${escHtml(post.title.slice(0,60))}${post.title.length>60?'...':''}</div>
      <div style="color:${s.color};font-size:.8rem;font-weight:700">${s.icon} ${s.label}</div>
    </div>`;
  }
}

// ═══════════════════════════════════════════════════════
//  CHAR COUNTERS
// ═══════════════════════════════════════════════════════
function setupCharCounters() {
  document.getElementById('inp-title').addEventListener('input', function() {
    document.getElementById('title-count').textContent = this.value.length;
  });
  document.getElementById('inp-body').addEventListener('input', function() {
    document.getElementById('body-count').textContent = this.value.length;
  });
}

// ═══════════════════════════════════════════════════════
//  ADMIN
// ═══════════════════════════════════════════════════════
function openAdminLogin() {
  if (isAdmin) {
    renderAdminPanel();
  }
  document.getElementById('admin-modal').classList.add('open');
}

function adminLogin() {
  const pass = document.getElementById('admin-pass').value;
  if (pass === ADMIN_PASS) {
    isAdmin = true;
    sessionStorage.setItem(ADMIN_KEY, 'true');
    document.getElementById('admin-login-view').style.display = 'none';
    document.getElementById('admin-panel-view').style.display = 'block';
    renderAdminPanel();
    showToast('&#128274; Admin panel unlocked.', 'success');
  } else {
    showToast('Incorrect password.', 'error');
    document.getElementById('admin-pass').style.borderColor = 'var(--red)';
    setTimeout(() => document.getElementById('admin-pass').style.borderColor = '', 1500);
  }
}

function adminLogout() {
  isAdmin = false;
  sessionStorage.removeItem(ADMIN_KEY);
  document.getElementById('admin-login-view').style.display = 'block';
  document.getElementById('admin-panel-view').style.display = 'none';
  document.getElementById('admin-pass').value = '';
  closeModal('admin-modal');
  showToast('Logged out of admin panel.', 'success');
}

function renderAdminPanel() {
  if (!isAdmin) return;
  document.getElementById('admin-login-view').style.display = 'none';
  document.getElementById('admin-panel-view').style.display = 'block';

  const pending  = allPosts.filter(p => p.status === 'pending');
  const approved = allPosts.filter(p => p.status === 'approved');

  document.getElementById('adm-pending-count').textContent  = pending.length;
  document.getElementById('adm-approved-count').textContent = approved.length;
  document.getElementById('adm-total-count').textContent    = allPosts.length;
  document.getElementById('adm-pending-badge').textContent  = pending.length;

  // Render pending
  const pList = document.getElementById('adm-pending-list');
  if (pending.length === 0) {
    pList.innerHTML = '<p style="font-size:.82rem;color:var(--dim);text-align:center;padding:1rem">No posts pending review.</p>';
  } else {
    pList.innerHTML = pending.map(p => adminPostCard(p, true)).join('');
  }

  // Render approved
  const aList = document.getElementById('adm-approved-list');
  if (approved.length === 0) {
    aList.innerHTML = '<p style="font-size:.82rem;color:var(--dim);text-align:center;padding:1rem">No approved posts yet.</p>';
  } else {
    aList.innerHTML = approved.map(p => adminPostCard(p, false)).join('');
  }
}

function adminPostCard(p, showActions) {
  const d = new Date(p.date).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'});
  return `<div style="background:var(--bg3);border:1px solid var(--border);border-radius:var(--r2);padding:.9rem" id="adm-${p.id}">
    <div style="font-size:.68rem;color:var(--dim);margin-bottom:.3rem;text-transform:uppercase;letter-spacing:.5px">${CAT_LABELS[p.cat]||p.cat} &nbsp;·&nbsp; by ${escHtml(p.name)} &nbsp;·&nbsp; ${d}</div>
    <div style="font-size:.875rem;font-weight:600;margin-bottom:.4rem;line-height:1.35">${escHtml(p.title)}</div>
    <div style="font-size:.78rem;color:var(--muted);line-height:1.5;margin-bottom:.6rem">${escHtml(p.body.slice(0,120))}${p.body.length>120?'...':''}</div>
    <div style="display:flex;gap:.5rem;flex-wrap:wrap">
      ${showActions ? `
        <button class="btn bgg btn-sm" onclick="adminAction('${p.id}','approved')">&#9989; Approve</button>
        <button class="btn br btn-sm" onclick="adminAction('${p.id}','rejected')">&#10060; Reject</button>
      ` : `
        <span style="font-size:.72rem;color:var(--teal);background:rgba(0,212,170,.07);border:1px solid rgba(0,212,170,.15);padding:.15rem .5rem;border-radius:4px">&#9989; Live</span>
        <button class="btn br btn-sm" style="font-size:.72rem;padding:.22rem .6rem" onclick="adminAction('${p.id}','deleted')">&#128465; Delete</button>
      `}
    </div>
  </div>`;
}

async function adminAction(id, action) {
  if (!isAdmin) return;
  if (action === 'deleted') {
    if (!confirm('Permanently delete this post?')) return;
    allPosts = allPosts.filter(p => p.id !== id);
    showToast('&#128465; Post deleted permanently.', 'success');
  } else {
    const post = allPosts.find(p => p.id === id);
    if (!post) return;
    post.status = action;
    post.reviewedAt = new Date().toISOString();
    const msg = action === 'approved' ? '&#9989; Post approved and now live!' : '&#10060; Post rejected.';
    showToast(msg, 'success');
  }
  await storageSave(allPosts);
  renderFeed();
  updateStats();
  renderAdminPanel();
}

async function adminClearAll() {
  allPosts = [];
  await storageSave(allPosts);
  renderFeed();
  updateStats();
  renderAdminPanel();
  showToast('All data cleared.', 'success');
}

// ═══════════════════════════════════════════════════════
//  UI HELPERS
// ═══════════════════════════════════════════════════════
function toggleNav() {
  const n = document.getElementById('navlinks');
  const t = document.querySelector('.nt');
  const open = n.classList.toggle('open');
  t.setAttribute('aria-expanded', open);
  t.innerHTML = open ? '&#10005;' : '&#9776;';
}

function openAdminLogin() {
  document.getElementById('admin-modal').classList.add('open');
  if (isAdmin) {
    document.getElementById('admin-login-view').style.display = 'none';
    document.getElementById('admin-panel-view').style.display = 'block';
    renderAdminPanel();
  } else {
    document.getElementById('admin-login-view').style.display = 'block';
    document.getElementById('admin-panel-view').style.display = 'none';
  }
}

function closeModal(id) { document.getElementById(id).classList.remove('open'); }

// Close modal on overlay click
document.addEventListener('click', e => {
  if (e.target.classList.contains('modal-overlay')) closeModal(e.target.id);
});

let toastTimer;
function showToast(msg, type='success') {
  const t = document.getElementById('toast');
  t.innerHTML = msg;
  t.className = `toast ${type} show`;
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 3500);
}

function escHtml(s) {
  return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');
}
</script>
</body>
</html>
